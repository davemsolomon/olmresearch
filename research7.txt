C:\Users\davem\Desktop\k8s-2025>minikube start
* minikube v1.36.0 on Microsoft Windows 11 Home 10.0.22631.4317 Build 22631.4317
* Using the docker driver based on user configuration
* Using Docker Desktop driver with root privileges
* Starting "minikube" primary control-plane node in "minikube" cluster
* Pulling base image v0.0.47 ...
* Creating docker container (CPUs=2, Memory=2200MB) ...
! Failing to connect to https://registry.k8s.io/ from inside the minikube container
* To pull new external images, you may need to configure a proxy: https://minikube.sigs.k8s.io/docs/reference/networking/proxy/
* Preparing Kubernetes v1.33.1 on Docker 28.1.1 ...
  - Generating certificates and keys ...
  - Booting up control plane ...
  - Configuring RBAC rules ...
* Configuring bridge CNI (Container Networking Interface) ...
* Verifying Kubernetes components...
  - Using image gcr.io/k8s-minikube/storage-provisioner:v5
* Enabled addons: storage-provisioner, default-storageclass
* Done! kubectl is now configured to use "minikube" cluster and "default" namespace by default

C:\Users\davem\Desktop\k8s-2025>minikube status
minikube
type: Control Plane
host: Running
kubelet: Running
apiserver: Running
kubeconfig: Configured


C:\Users\davem\Desktop\k8s-2025>kubectl get pods --all-namespaces
NAMESPACE     NAME                               READY   STATUS    RESTARTS        AGE
kube-system   coredns-674b8bbfcf-cwd2c           1/1     Running   0               2m59s
kube-system   etcd-minikube                      1/1     Running   0               3m4s
kube-system   kube-apiserver-minikube            1/1     Running   0               3m7s
kube-system   kube-controller-manager-minikube   1/1     Running   0               3m4s
kube-system   kube-proxy-msqfd                   1/1     Running   0               2m59s
kube-system   kube-scheduler-minikube            1/1     Running   0               3m9s
kube-system   storage-provisioner                1/1     Running   1 (2m36s ago)   3m1s

### install OLM into minikube
### https://operator-framework.github.io/olm-book/docs/install-olm.html
kubectl create -f https://raw.githubusercontent.com/operator-framework/operator-lifecycle-manager/master/deploy/upstream/quickstart/crds.yaml
kubectl create -f https://raw.githubusercontent.com/operator-framework/operator-lifecycle-manager/master/deploy/upstream/quickstart/olm.yaml

C:\Users\davem\Desktop\k8s-2025>kubectl create -f https://raw.githubusercontent.com/operator-framework/operator-lifecycle-manager/master/deploy/upstream/quickstart/crds.yaml
customresourcedefinition.apiextensions.k8s.io/catalogsources.operators.coreos.com created
customresourcedefinition.apiextensions.k8s.io/clusterserviceversions.operators.coreos.com created
customresourcedefinition.apiextensions.k8s.io/installplans.operators.coreos.com created
customresourcedefinition.apiextensions.k8s.io/operatorconditions.operators.coreos.com created
customresourcedefinition.apiextensions.k8s.io/operatorgroups.operators.coreos.com created
customresourcedefinition.apiextensions.k8s.io/operators.operators.coreos.com created
customresourcedefinition.apiextensions.k8s.io/subscriptions.operators.coreos.com created

C:\Users\davem\Desktop\k8s-2025>kubectl create -f https://raw.githubusercontent.com/operator-framework/operator-lifecycle-manager/master/deploy/upstream/quickstart/olm.yaml
namespace/olm created
namespace/operators created
serviceaccount/olm-operator-serviceaccount created
clusterrole.rbac.authorization.k8s.io/system:controller:operator-lifecycle-manager created
clusterrolebinding.rbac.authorization.k8s.io/olm-operator-binding-olm created
deployment.apps/olm-operator created
deployment.apps/catalog-operator created
clusterrole.rbac.authorization.k8s.io/aggregate-olm-edit created
clusterrole.rbac.authorization.k8s.io/aggregate-olm-view created
operatorgroup.operators.coreos.com/global-operators created
operatorgroup.operators.coreos.com/olm-operators created
clusterserviceversion.operators.coreos.com/packageserver created
catalogsource.operators.coreos.com/operatorhubio-catalog created

## catalogsource.yml
  apiVersion: operators.coreos.com/v1alpha1
  kind: CatalogSource
  metadata:
    name: operatorhubio-catalog
    namespace: olm
  spec:
    sourceType: grpc
    image: quay.io/operatorhubio/catalog:latest
    displayName: Community Operators
    publisher: OperatorHub.io

## apply catalogsource.yml
C:\Users\davem\Desktop\k8s-2025>kubectl apply -f ./catalogsource.yml

C:\Users\davem\Desktop\k8s-2025>kubectl apply -f ./catalogsource.yml
Warning: resource catalogsources/operatorhubio-catalog is missing the kubectl.kubernetes.io/last-applied-configuration annotation which is required by kubectl apply. kubectl apply should only be used on resources created declaratively by either kubectl create --save-config or kubectl apply. The missing annotation will be patched automatically.
catalogsource.operators.coreos.com/operatorhubio-catalog configured

### https://olm.operatorframework.io/docs/troubleshooting/catalogsource/
wait about 3 min and then
C:\Users\davem\Desktop\k8s-2025>kubectl -n olm get packagemanifests
NAME                                       CATALOG               AGE
service-binding-operator                   Community Operators   3m12s
ack-acm-controller                         Community Operators   3m12s
kubeflow                                   Community Operators   3m12s
ecr-secret-operator                        Community Operators   3m12s
istio                                      Community Operators   3m12s
...

## subscription.yml
apiVersion: operators.coreos.com/v1alpha1
kind: Subscription
metadata:
  name: postgresoperator
  namespace: olm
spec:
  channel: stable
  name: postgres-operator
  source: operatorhubio-catalog
  sourceNamespace: olm
  installPlanApproval: Automatic

C:\Users\davem\Desktop\k8s-2025>kubectl apply -f ./subscription.yml
subscription.operators.coreos.com/postgresoperator created

C:\Users\davem\Desktop\k8s-2025>kubectl get installplans --all-namespaces
NAMESPACE   NAME            CSV                        APPROVAL    APPROVED
olm         install-cvc9g   postgres-operator.v1.4.0   Automatic   true

C:\Users\davem\Desktop\k8s-2025>kubectl get pods --all-namespaces
NAMESPACE     NAME                                                              READY   STATUS      RESTARTS      AGE
kube-system   coredns-674b8bbfcf-cwd2c                                          1/1     Running     0             15m
kube-system   etcd-minikube                                                     1/1     Running     0             15m
kube-system   kube-apiserver-minikube                                           1/1     Running     0             15m
kube-system   kube-controller-manager-minikube                                  1/1     Running     0             15m
kube-system   kube-proxy-msqfd                                                  1/1     Running     0             15m
kube-system   kube-scheduler-minikube                                           1/1     Running     0             15m
kube-system   storage-provisioner                                               1/1     Running     1 (15m ago)   15m
olm           catalog-operator-74846dffc9-blmwj                                 1/1     Running     0             11m
olm           f6549574de44f28a3732323c9b91e34ba802a89403d95345400a004830578vc   0/1     Completed   0             35s
olm           olm-operator-5898bd86cf-dd7bh                                     1/1     Running     0             11m
olm           operatorhubio-catalog-5qm42                                       1/1     Running     0             10m
olm           packageserver-74c975f487-99fcr                                    1/1     Running     0             10m
olm           packageserver-74c975f487-f7tpv                                    1/1     Running     0             10m

C:\Users\davem\Desktop\k8s-2025>kubectl get installplan install-cvc9g -n olm -o yaml
apiVersion: operators.coreos.com/v1alpha1
kind: InstallPlan
metadata:
  creationTimestamp: "2025-07-26T00:52:23Z"
  generateName: install-
  generation: 1
  labels:
    operators.coreos.com/postgres-operator.olm: ""
  name: install-cvc9g
  namespace: olm
  ownerReferences:
  - apiVersion: operators.coreos.com/v1alpha1
    blockOwnerDeletion: false
    controller: false
    kind: Subscription
    name: postgresoperator
    uid: 0a38894e-3d16-4b30-a35b-0737ff7f907b
  resourceVersion: "1463"
  uid: c0894b9d-0eb2-424c-bb77-53b1b82fdb56
spec:
  approval: Automatic
  approved: true
  clusterServiceVersionNames:
  - postgres-operator.v1.4.0
  generation: 1
status:
  bundleLookups:
  - catalogSourceRef:
      name: operatorhubio-catalog
      namespace: olm
    identifier: postgres-operator.v1.4.0
    path: quay.io/operatorhubio/postgres-operator@sha256:76af21ce79818a1a9eb7711b7630e5797736121a9af9025f142312c15e036735
    properties: '{"properties":[{"type":"olm.gvk","value":{"group":"acid.zalan.do","kind":"OperatorConfiguration","version":"v1"}},{"type":"olm.gvk","value":{"group":"acid.zalan.do","kind":"postgresql","version":"v1"}},{"type":"olm.package","value":{"packageName":"postgres-operator","version":"1.4.0"}}]}'
    replaces: postgres-operator.v1.3.0
  catalogSources: []
  message: 'retrying execution due to error: the server could not find the requested
    resource'
  phase: Installing
  plan:
  - resolving: postgres-operator.v1.4.0
    resource:
      group: operators.coreos.com
      kind: ClusterServiceVersion
      manifest: '{"kind":"ConfigMap","name":"f6549574de44f28a3732323c9b91e34ba802a89403d95345400a00483050021","namespace":"olm","catalogSourceName":"operatorhubio-catalog","catalogSourceNamespace":"olm","replaces":"postgres-operator.v1.3.0","properties":"{\"properties\":[{\"type\":\"olm.gvk\",\"value\":{\"group\":\"acid.zalan.do\",\"kind\":\"OperatorConfiguration\",\"version\":\"v1\"}},{\"type\":\"olm.gvk\",\"value\":{\"group\":\"acid.zalan.do\",\"kind\":\"postgresql\",\"version\":\"v1\"}},{\"type\":\"olm.package\",\"value\":{\"packageName\":\"postgres-operator\",\"version\":\"1.4.0\"}}]}"}'
      name: postgres-operator.v1.4.0
      sourceName: operatorhubio-catalog
      sourceNamespace: olm
      version: v1alpha1
    status: Created
  - resolving: postgres-operator.v1.4.0
    resource:
      group: apiextensions.k8s.io
      kind: CustomResourceDefinition
      manifest: '{"kind":"ConfigMap","name":"f6549574de44f28a3732323c9b91e34ba802a89403d95345400a00483050021","namespace":"olm","catalogSourceName":"operatorhubio-catalog","catalogSourceNamespace":"olm","replaces":"postgres-operator.v1.3.0","properties":"{\"properties\":[{\"type\":\"olm.gvk\",\"value\":{\"group\":\"acid.zalan.do\",\"kind\":\"OperatorConfiguration\",\"version\":\"v1\"}},{\"type\":\"olm.gvk\",\"value\":{\"group\":\"acid.zalan.do\",\"kind\":\"postgresql\",\"version\":\"v1\"}},{\"type\":\"olm.package\",\"value\":{\"packageName\":\"postgres-operator\",\"version\":\"1.4.0\"}}]}"}'
      name: postgresqls.acid.zalan.do
      sourceName: operatorhubio-catalog
      sourceNamespace: olm
      version: v1beta1
    status: Unknown
  - resolving: postgres-operator.v1.4.0
    resource:
      group: rbac.authorization.k8s.io
      kind: ClusterRole
      manifest: '{"kind":"ConfigMap","name":"f6549574de44f28a3732323c9b91e34ba802a89403d95345400a00483050021","namespace":"olm","catalogSourceName":"operatorhubio-catalog","catalogSourceNamespace":"olm","replaces":"postgres-operator.v1.3.0","properties":"{\"properties\":[{\"type\":\"olm.gvk\",\"value\":{\"group\":\"acid.zalan.do\",\"kind\":\"OperatorConfiguration\",\"version\":\"v1\"}},{\"type\":\"olm.gvk\",\"value\":{\"group\":\"acid.zalan.do\",\"kind\":\"postgresql\",\"version\":\"v1\"}},{\"type\":\"olm.package\",\"value\":{\"packageName\":\"postgres-operator\",\"version\":\"1.4.0\"}}]}"}'
      name: postgres-pod
      sourceName: operatorhubio-catalog
      sourceNamespace: olm
      version: v1
    status: Unknown
  - resolving: postgres-operator.v1.4.0
    resource:
      group: apiextensions.k8s.io
      kind: CustomResourceDefinition
      manifest: '{"kind":"ConfigMap","name":"f6549574de44f28a3732323c9b91e34ba802a89403d95345400a00483050021","namespace":"olm","catalogSourceName":"operatorhubio-catalog","catalogSourceNamespace":"olm","replaces":"postgres-operator.v1.3.0","properties":"{\"properties\":[{\"type\":\"olm.gvk\",\"value\":{\"group\":\"acid.zalan.do\",\"kind\":\"OperatorConfiguration\",\"version\":\"v1\"}},{\"type\":\"olm.gvk\",\"value\":{\"group\":\"acid.zalan.do\",\"kind\":\"postgresql\",\"version\":\"v1\"}},{\"type\":\"olm.package\",\"value\":{\"packageName\":\"postgres-operator\",\"version\":\"1.4.0\"}}]}"}'
      name: operatorconfigurations.acid.zalan.do
      sourceName: operatorhubio-catalog
      sourceNamespace: olm
      version: v1beta1
    status: Unknown
  - resolving: postgres-operator.v1.4.0
    resource:
      group: ""
      kind: ServiceAccount
      manifest: '{"kind":"ConfigMap","name":"f6549574de44f28a3732323c9b91e34ba802a89403d95345400a00483050021","namespace":"olm","catalogSourceName":"operatorhubio-catalog","catalogSourceNamespace":"olm","replaces":"postgres-operator.v1.3.0","properties":"{\"properties\":[{\"type\":\"olm.gvk\",\"value\":{\"group\":\"acid.zalan.do\",\"kind\":\"OperatorConfiguration\",\"version\":\"v1\"}},{\"type\":\"olm.gvk\",\"value\":{\"group\":\"acid.zalan.do\",\"kind\":\"postgresql\",\"version\":\"v1\"}},{\"type\":\"olm.package\",\"value\":{\"packageName\":\"postgres-operator\",\"version\":\"1.4.0\"}}]}"}'
      name: postgres-operator
      sourceName: operatorhubio-catalog
      sourceNamespace: olm
      version: v1
    status: Unknown
  - resolving: postgres-operator.v1.4.0
    resource:
      group: rbac.authorization.k8s.io
      kind: Role
      manifest: '{"kind":"ConfigMap","name":"f6549574de44f28a3732323c9b91e34ba802a89403d95345400a00483050021","namespace":"olm","catalogSourceName":"operatorhubio-catalog","catalogSourceNamespace":"olm","replaces":"postgres-operator.v1.3.0","properties":"{\"properties\":[{\"type\":\"olm.gvk\",\"value\":{\"group\":\"acid.zalan.do\",\"kind\":\"OperatorConfiguration\",\"version\":\"v1\"}},{\"type\":\"olm.gvk\",\"value\":{\"group\":\"acid.zalan.do\",\"kind\":\"postgresql\",\"version\":\"v1\"}},{\"type\":\"olm.package\",\"value\":{\"packageName\":\"postgres-operator\",\"version\":\"1.4.0\"}}]}"}'
      name: postgres-operator.v1.4.0-postgres-operator-74c7cc9b6f
      sourceName: operatorhubio-catalog
      sourceNamespace: olm
      version: v1
    status: Unknown
  - resolving: postgres-operator.v1.4.0
    resource:
      group: rbac.authorization.k8s.io
      kind: RoleBinding
      manifest: '{"kind":"ConfigMap","name":"f6549574de44f28a3732323c9b91e34ba802a89403d95345400a00483050021","namespace":"olm","catalogSourceName":"operatorhubio-catalog","catalogSourceNamespace":"olm","replaces":"postgres-operator.v1.3.0","properties":"{\"properties\":[{\"type\":\"olm.gvk\",\"value\":{\"group\":\"acid.zalan.do\",\"kind\":\"OperatorConfiguration\",\"version\":\"v1\"}},{\"type\":\"olm.gvk\",\"value\":{\"group\":\"acid.zalan.do\",\"kind\":\"postgresql\",\"version\":\"v1\"}},{\"type\":\"olm.package\",\"value\":{\"packageName\":\"postgres-operator\",\"version\":\"1.4.0\"}}]}"}'
      name: postgres-operator.v1.4.0-postgres-operator-74c7cc9b6f
      sourceName: operatorhubio-catalog
      sourceNamespace: olm
      version: v1
    status: Unknown
  - resolving: postgres-operator.v1.4.0
    resource:
      group: rbac.authorization.k8s.io
      kind: ClusterRole
      manifest: '{"kind":"ConfigMap","name":"f6549574de44f28a3732323c9b91e34ba802a89403d95345400a00483050021","namespace":"olm","catalogSourceName":"operatorhubio-catalog","catalogSourceNamespace":"olm","replaces":"postgres-operator.v1.3.0","properties":"{\"properties\":[{\"type\":\"olm.gvk\",\"value\":{\"group\":\"acid.zalan.do\",\"kind\":\"OperatorConfiguration\",\"version\":\"v1\"}},{\"type\":\"olm.gvk\",\"value\":{\"group\":\"acid.zalan.do\",\"kind\":\"postgresql\",\"version\":\"v1\"}},{\"type\":\"olm.package\",\"value\":{\"packageName\":\"postgres-operator\",\"version\":\"1.4.0\"}}]}"}'
      name: postgres-operator.v1.4.0-696845f98f
      sourceName: operatorhubio-catalog
      sourceNamespace: olm
      version: v1
    status: Unknown
  - resolving: postgres-operator.v1.4.0
    resource:
      group: rbac.authorization.k8s.io
      kind: ClusterRoleBinding
      manifest: '{"kind":"ConfigMap","name":"f6549574de44f28a3732323c9b91e34ba802a89403d95345400a00483050021","namespace":"olm","catalogSourceName":"operatorhubio-catalog","catalogSourceNamespace":"olm","replaces":"postgres-operator.v1.3.0","properties":"{\"properties\":[{\"type\":\"olm.gvk\",\"value\":{\"group\":\"acid.zalan.do\",\"kind\":\"OperatorConfiguration\",\"version\":\"v1\"}},{\"type\":\"olm.gvk\",\"value\":{\"group\":\"acid.zalan.do\",\"kind\":\"postgresql\",\"version\":\"v1\"}},{\"type\":\"olm.package\",\"value\":{\"packageName\":\"postgres-operator\",\"version\":\"1.4.0\"}}]}"}'
      name: postgres-operator.v1.4.0-696845f98f
      sourceName: operatorhubio-catalog
      sourceNamespace: olm
      version: v1
    status: Unknown
  startTime: "2025-07-26T00:53:00Z"

C:\Users\davem\Desktop\k8s-2025>kubectl get crd --all-namespaces
NAME                                          CREATED AT
catalogsources.operators.coreos.com           2025-07-26T00:41:10Z
clusterserviceversions.operators.coreos.com   2025-07-26T00:41:11Z
installplans.operators.coreos.com             2025-07-26T00:41:11Z
operatorconditions.operators.coreos.com       2025-07-26T00:41:11Z
operatorgroups.operators.coreos.com           2025-07-26T00:41:11Z
operators.operators.coreos.com                2025-07-26T00:41:11Z
subscriptions.operators.coreos.com            2025-07-26T00:41:11Z

C:\Users\davem\Desktop\k8s-2025>kubectl get csv --all-namespaces
NAMESPACE   NAME                       DISPLAY             VERSION   REPLACES                   PHASE
olm         packageserver              Package Server      0.18.3                               Succeeded
olm         postgres-operator.v1.4.0   Postgres-Operator   1.4.0     postgres-operator.v1.3.0   Pending
